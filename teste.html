<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pintinho Amarelinho - Aprendendo ABC</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --purple-main: #8B5CF6;
            --purple-dark: #7C3AED;
            --purple-light: #A78BFA;
            --pink: #EC4899;
            --blue: #3B82F6;
            --yellow: #FCD34D;
            --green: #10B981;
            --orange: #FB923C;
            --red: #EF4444;
            --cyan: #06B6D4;
            --white: #FFFFFF;
            --gray-light: #F3F4F6;
            --text: #1F2937;
        }

        @font-face {
            font-family: 'Bubblegum';
            src: local('Comic Sans MS'), local('Chalkboard SE'), local('Bradley Hand');
        }

        body {
            font-family: 'Bubblegum', 'Comic Sans MS', cursive;
            background: linear-gradient(180deg, var(--purple-main) 0%, var(--purple-dark) 100%);
            min-height: 100vh;
            color: var(--text);
            overflow-x: hidden;
            position: relative;
        }

        /* Anima√ß√µes */
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            33% { transform: translateY(-10px) rotate(-3deg); }
            66% { transform: translateY(5px) rotate(3deg); }
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes popIn {
            0% { transform: scale(0) rotate(-180deg); opacity: 0; }
            50% { transform: scale(1.2) rotate(10deg); }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        @keyframes wiggle {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
        }

        @keyframes confetti {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        /* Container principal */
        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .logo-area {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .mascot-avatar {
            width: 60px;
            height: 60px;
            background: var(--yellow);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 35px;
            animation: bounce 2s infinite;
            cursor: pointer;
            border: 3px solid var(--white);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .app-title {
            font-size: 24px;
            color: var(--purple-dark);
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .header-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .header-btn {
            width: 45px;
            height: 45px;
            background: var(--purple-light);
            border: none;
            border-radius: 15px;
            color: white;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .header-btn:hover {
            transform: scale(1.1);
            background: var(--purple-main);
        }

        /* Screens */
        .screen {
            display: none;
            animation: slideIn 0.5s ease;
        }

        .screen.active {
            display: block;
        }

        /* Menu Principal */
        .main-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .menu-item {
            background: white;
            border-radius: 25px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .menu-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent, rgba(255,255,255,0.5));
            opacity: 0;
            transition: opacity 0.3s;
        }

        .menu-item:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .menu-item:hover::before {
            opacity: 1;
        }

        .menu-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 45px;
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 1;
        }

        .menu-item.vowels .menu-icon { background: linear-gradient(135deg, var(--pink), var(--purple-light)); }
        .menu-item.syllables .menu-icon { background: linear-gradient(135deg, var(--blue), var(--cyan)); }
        .menu-item.words .menu-icon { background: linear-gradient(135deg, var(--green), var(--cyan)); }
        .menu-item.rhymes .menu-icon { background: linear-gradient(135deg, var(--yellow), var(--orange)); }
        .menu-item.bingo .menu-icon { background: linear-gradient(135deg, var(--red), var(--pink)); }
        .menu-item.memory .menu-icon { background: linear-gradient(135deg, var(--purple-main), var(--pink)); }
        .menu-item.story .menu-icon { background: linear-gradient(135deg, var(--orange), var(--yellow)); }
        .menu-item.complete .menu-icon { background: linear-gradient(135deg, var(--purple-dark), var(--cyan)); }

        .menu-label {
            font-size: 16px;
            font-weight: bold;
            color: var(--text);
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .menu-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--red);
            color: white;
            border-radius: 12px;
            padding: 2px 8px;
            font-size: 12px;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        /* Activity Container */
        .activity-container {
            background: rgba(255,255,255,0.95);
            border-radius: 25px;
            padding: 2rem;
            margin: 1rem 0;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .activity-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: linear-gradient(135deg, var(--purple-light), var(--pink));
            border-radius: 20px;
            color: white;
        }

        .activity-title {
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .score-display {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255,255,255,0.3);
            padding: 0.5rem 1rem;
            border-radius: 15px;
        }

        .score-value {
            font-size: 20px;
            font-weight: bold;
        }

        /* Vogais Game */
        .vowels-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1rem;
            margin: 2rem 0;
        }

        .vowel-card {
            background: white;
            border: 4px solid var(--purple-light);
            border-radius: 20px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .vowel-card:hover {
            transform: scale(1.1) rotate(5deg);
            border-color: var(--purple-main);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .vowel-card.selected {
            background: var(--yellow);
            animation: wiggle 0.5s ease;
        }

        .vowel-letter {
            font-size: 48px;
            font-weight: bold;
            color: var(--purple-dark);
            margin-bottom: 0.5rem;
        }

        .vowel-image {
            font-size: 36px;
        }

        /* Drag and Drop Area */
        .drag-game-container {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        .letter-source {
            background: linear-gradient(135deg, var(--purple-light), var(--pink));
            border-radius: 20px;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .draggable-letter {
            width: 120px;
            height: 120px;
            background: white;
            border: 4px solid var(--purple-dark);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            font-weight: bold;
            color: var(--purple-dark);
            cursor: move;
            transition: all 0.3s;
            position: relative;
        }

        .draggable-letter:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .draggable-letter.dragging {
            opacity: 0.7;
            transform: scale(1.2);
            z-index: 1000;
        }

        .targets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
        }

        .drop-target {
            background: white;
            border: 4px dashed var(--purple-light);
            border-radius: 20px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
            min-height: 180px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .drop-target:hover {
            transform: scale(1.05);
            border-color: var(--purple-main);
            background: var(--gray-light);
        }

        .drop-target.drag-over {
            background: var(--yellow);
            border-color: var(--orange);
            transform: scale(1.1);
        }

        .drop-target.correct {
            background: var(--green);
            border-color: var(--green);
            color: white;
            animation: bounce 0.5s;
        }

        .drop-target.incorrect {
            background: var(--red);
            border-color: var(--red);
            color: white;
            animation: wiggle 0.3s;
        }

        .target-emoji {
            font-size: 60px;
            margin-bottom: 0.5rem;
        }

        .target-word {
            font-size: 18px;
            font-weight: bold;
            color: inherit;
        }

        /* S√≠labas */
        .syllable-builder {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
            margin: 2rem 0;
        }

        .syllable-slots {
            display: flex;
            gap: 1rem;
        }

        .syllable-slot {
            width: 100px;
            height: 100px;
            background: white;
            border: 4px dashed var(--purple-light);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: bold;
            color: var(--purple-dark);
        }

        .syllable-slot.filled {
            border-style: solid;
            background: var(--yellow);
        }

        .letter-options {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .letter-option {
            width: 80px;
            height: 80px;
            background: white;
            border: 3px solid var(--purple-light);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            color: var(--purple-dark);
            cursor: pointer;
            transition: all 0.3s;
        }

        .letter-option:hover {
            transform: scale(1.1);
            border-color: var(--purple-main);
            background: var(--purple-light);
            color: white;
        }

        .letter-option.used {
            opacity: 0.3;
            pointer-events: none;
        }

        /* Bingo */
        .bingo-container {
            max-width: 500px;
            margin: 2rem auto;
        }

        .bingo-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin: 2rem 0;
        }

        .bingo-cell {
            aspect-ratio: 1;
            background: white;
            border: 4px solid var(--purple-light);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: bold;
            color: var(--purple-dark);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .bingo-cell:hover {
            transform: scale(1.05);
            border-color: var(--purple-main);
        }

        .bingo-cell.marked {
            background: var(--yellow);
            border-color: var(--orange);
        }

        .bingo-cell.marked::after {
            content: '‚≠ê';
            position: absolute;
            font-size: 40px;
            animation: popIn 0.5s ease;
        }

        .bingo-caller {
            background: linear-gradient(135deg, var(--purple-main), var(--pink));
            color: white;
            padding: 1.5rem;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 2rem;
        }

        .called-item {
            font-size: 48px;
            font-weight: bold;
            margin: 1rem 0;
            animation: bounce 1s infinite;
        }

        /* Memory Game */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            max-width: 600px;
            margin: 2rem auto;
        }

        .memory-card {
            aspect-ratio: 1;
            background: linear-gradient(135deg, var(--purple-light), var(--pink));
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            transform-style: preserve-3d;
        }

        .memory-card:hover {
            transform: scale(1.05);
        }

        .memory-card.flipped {
            background: white;
            border: 4px solid var(--purple-light);
        }

        .memory-card.matched {
            background: var(--green);
            border-color: var(--green);
            animation: bounce 0.5s;
            pointer-events: none;
        }

        .card-back {
            font-size: 50px;
            color: white;
        }

        .card-front {
            display: none;
        }

        .memory-card.flipped .card-back {
            display: none;
        }

        .memory-card.flipped .card-front {
            display: block;
        }

        /* Story Mode */
        .story-container {
            max-width: 800px;
            margin: 2rem auto;
        }

        .story-scene {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            position: relative;
            min-height: 300px;
        }

        .story-illustration {
            font-size: 120px;
            text-align: center;
            margin: 2rem 0;
            animation: float 3s infinite;
        }

        .story-text {
            font-size: 20px;
            line-height: 1.8;
            color: var(--text);
            text-align: center;
            margin: 1rem 0;
        }

        .story-highlight {
            color: var(--purple-main);
            font-weight: bold;
            font-size: 24px;
            background: var(--yellow);
            padding: 2px 8px;
            border-radius: 8px;
        }

        .story-options {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
        }

        .story-choice {
            padding: 1rem 2rem;
            background: var(--purple-light);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .story-choice:hover {
            transform: scale(1.1);
            background: var(--purple-main);
        }

        /* Rhymes */
        .rhyme-container {
            text-align: center;
            margin: 2rem 0;
        }

        .rhyme-word {
            font-size: 60px;
            font-weight: bold;
            color: var(--purple-dark);
            margin-bottom: 2rem;
            animation: pulse 2s infinite;
        }

        .rhyme-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .rhyme-option {
            background: white;
            border: 4px solid var(--purple-light);
            border-radius: 20px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .rhyme-option:hover {
            transform: scale(1.05);
            border-color: var(--purple-main);
            background: var(--purple-light);
            color: white;
        }

        .rhyme-option.correct {
            background: var(--green);
            border-color: var(--green);
            color: white;
        }

        .rhyme-option.incorrect {
            background: var(--red);
            border-color: var(--red);
            color: white;
        }

        /* Avatar Selection */
        .avatar-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }

        .avatar-modal.active {
            display: flex;
        }

        .avatar-selection {
            background: white;
            border-radius: 25px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .avatar-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin: 2rem 0;
        }

        .avatar-option {
            width: 80px;
            height: 80px;
            background: var(--yellow);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            cursor: pointer;
            transition: all 0.3s;
            border: 4px solid transparent;
        }

        .avatar-option:hover {
            transform: scale(1.1);
            border-color: var(--purple-main);
        }

        .avatar-option.selected {
            border-color: var(--purple-dark);
            background: var(--green);
        }

        /* Theme Selector */
        .theme-selector {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin: 1rem 0;
        }

        .theme-option {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
        }

        .theme-option:hover {
            transform: scale(1.1);
            border-color: var(--purple-dark);
        }

        .theme-option.selected {
            border-color: var(--purple-dark);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .theme-forest { background: linear-gradient(135deg, #228B22, #90EE90); }
        .theme-ocean { background: linear-gradient(135deg, #0077BE, #87CEEB); }
        .theme-space { background: linear-gradient(135deg, #191970, #9370DB); }
        .theme-default { background: linear-gradient(135deg, var(--purple-main), var(--purple-dark)); }

        /* Progress Bar */
        .progress-bar-container {
            background: white;
            border-radius: 20px;
            padding: 5px;
            margin: 2rem 0;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.1);
        }

        .progress-bar {
            height: 30px;
            background: linear-gradient(90deg, var(--purple-light), var(--pink), var(--yellow));
            border-radius: 15px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
        }

        .progress-star {
            color: white;
            font-size: 20px;
            animation: pulse 1s infinite;
        }

        /* Buttons */
        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 20px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--purple-main), var(--purple-dark));
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--pink), var(--purple-light));
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, var(--green), var(--cyan));
            color: white;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .btn:active {
            transform: translateY(0);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        /* Celebration */
        .celebration-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        .confetti {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--yellow);
            animation: confetti 3s ease-in-out;
        }

        .confetti:nth-child(2n) { background: var(--pink); }
        .confetti:nth-child(3n) { background: var(--purple-light); }
        .confetti:nth-child(4n) { background: var(--green); }
        .confetti:nth-child(5n) { background: var(--orange); }

        /* Audio Control */
        .audio-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: var(--purple-main);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            color: white;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s;
            z-index: 1000;
        }

        .audio-toggle:hover {
            transform: scale(1.1);
            background: var(--purple-dark);
        }

        .audio-toggle.muted {
            background: var(--gray-light);
            color: var(--text);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-menu {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }

            .drag-game-container {
                grid-template-columns: 1fr;
            }

            .memory-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .vowels-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .avatar-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .app-title {
                font-size: 18px;
            }

            .header-btn {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }
        }

        /* Loading */
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 5px solid var(--purple-light);
            border-top: 5px solid var(--purple-dark);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="logo-area">
            <div class="mascot-avatar" id="currentAvatar" onclick="openAvatarModal()">üê•</div>
            <div class="app-title">Pintinho Amarelinho ABC</div>
        </div>
        <div class="header-buttons">
            <button class="header-btn" onclick="openThemeSelector()">üé®</button>
            <button class="header-btn" onclick="showParentPanel()">üìä</button>
            <button class="header-btn" onclick="goHome()">üè†</button>
        </div>
    </div>

    <!-- App Container -->
    <div class="app-container">
        <!-- Tela Principal -->
        <div id="homeScreen" class="screen active">
            <div class="main-menu">
                <div class="menu-item vowels" onclick="startActivity('vowels')">
                    <div class="menu-icon">üî§</div>
                    <div class="menu-label">Vogais</div>
                </div>

                <div class="menu-item syllables" onclick="startActivity('syllables')">
                    <div class="menu-icon">üìù</div>
                    <div class="menu-label">S√≠labas</div>
                </div>

                <div class="menu-item words" onclick="startActivity('words')">
                    <div class="menu-icon">üìñ</div>
                    <div class="menu-label">Palavras</div>
                </div>

                <div class="menu-item rhymes" onclick="startActivity('rhymes')">
                    <div class="menu-icon">üéµ</div>
                    <div class="menu-label">Rimas</div>
                </div>

                <div class="menu-item bingo" onclick="startActivity('bingo')">
                    <div class="menu-icon">üé≤</div>
                    <div class="menu-label">Bingo</div>
                    <div class="menu-badge">NOVO</div>
                </div>

                <div class="menu-item memory" onclick="startActivity('memory')">
                    <div class="menu-icon">üÉè</div>
                    <div class="menu-label">Mem√≥ria</div>
                </div>

                <div class="menu-item story" onclick="startActivity('story')">
                    <div class="menu-icon">üìö</div>
                    <div class="menu-label">Hist√≥ria</div>
                </div>

                <div class="menu-item complete" onclick="startActivity('complete')">
                    <div class="menu-icon">‚≠ê</div>
                    <div class="menu-label">Completo</div>
                </div>
            </div>
        </div>

        <!-- Tela de Vogais -->
        <div id="vowelsScreen" class="screen">
            <div class="activity-container">
                <div class="activity-header">
                    <div class="activity-title">üéØ Aprendendo as Vogais</div>
                    <div class="score-display">
                        <span>‚≠ê</span>
                        <span class="score-value" id="vowelScore">0</span>
                    </div>
                </div>

                <div class="vowels-grid">
                    <div class="vowel-card" onclick="selectVowel('A')" data-vowel="A">
                        <div class="vowel-letter">A</div>
                        <div class="vowel-image">üçé</div>
                    </div>
                    <div class="vowel-card" onclick="selectVowel('E')" data-vowel="E">
                        <div class="vowel-letter">E</div>
                        <div class="vowel-image">üêò</div>
                    </div>
                    <div class="vowel-card" onclick="selectVowel('I')" data-vowel="I">
                        <div class="vowel-letter">I</div>
                        <div class="vowel-image">üèùÔ∏è</div>
                    </div>
                    <div class="vowel-card" onclick="selectVowel('O')" data-vowel="O">
                        <div class="vowel-letter">O</div>
                        <div class="vowel-image">üêô</div>
                    </div>
                    <div class="vowel-card" onclick="selectVowel('U')" data-vowel="U">
                        <div class="vowel-letter">U</div>
                        <div class="vowel-image">ü¶Ñ</div>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 2rem;">
                    <button class="btn btn-primary" onclick="startVowelDragGame()">
                        üéÆ Jogar Arrastar Vogais
                    </button>
                </div>
            </div>
        </div>

        <!-- Jogo de Arrastar Vogais -->
        <div id="vowelDragScreen" class="screen">
            <div class="activity-container">
                <div class="activity-header">
                    <div class="activity-title">Arraste a Letra at√© a Figura!</div>
                    <div class="score-display">
                        <span>‚≠ê</span>
                        <span class="score-value" id="dragScore">0</span>
                    </div>
                </div>

                <div class="drag-game-container">
                    <div class="letter-source">
                        <h3 style="color: white; margin-bottom: 1rem;">Arraste:</h3>
                        <div id="letterContainer"></div>
                    </div>

                    <div class="targets-grid" id="targetsContainer"></div>
                </div>

                <div class="progress-bar-container">
                    <div class="progress-bar" id="progressBar" style="width: 10%;">
                        <span class="progress-star">‚≠ê</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tela de S√≠labas -->
        <div id="syllablesScreen" class="screen">
            <div class="activity-container">
                <div class="activity-header">
                    <div class="activity-title">üî§ Formando S√≠labas</div>
                    <div class="score-display">
                        <span>‚≠ê</span>
                        <span class="score-value" id="syllableScore">0</span>
                    </div>
                </div>

                <div class="syllable-builder">
                    <div>
                        <h3 style="color: var(--purple-dark); margin-bottom: 1rem;">Forme a s√≠laba: <span id="targetSyllable">BA</span></h3>
                    </div>

                    <div class="syllable-slots" id="syllableSlots">
                        <div class="syllable-slot" id="slot1"></div>
                        <div class="syllable-slot" id="slot2"></div>
                    </div>

                    <div class="letter-options" id="letterOptions"></div>

                    <button class="btn btn-success" onclick="checkSyllable()">Verificar</button>
                </div>
            </div>
        </div>

        <!-- Tela de Palavras -->
        <div id="wordsScreen" class="screen">
            <div class="activity-container">
                <div class="activity-header">
                    <div class="activity-title">üìñ Formando Palavras</div>
                    <div class="score-display">
                        <span>‚≠ê</span>
                        <span class="score-value" id="wordScore">0</span>
                    </div>
                </div>

                <div class="syllable-builder">
                    <div style="text-align: center;">
                        <div style="font-size: 80px; margin: 2rem 0;" id="wordImage">üê±</div>
                        <h3 style="color: var(--purple-dark);">Forme a palavra: <span id="targetWord">GATO</span></h3>
                    </div>

                    <div class="syllable-slots" id="wordSlots">
                        <div class="syllable-slot"></div>
                        <div class="syllable-slot"></div>
                        <div class="syllable-slot"></div>
                        <div class="syllable-slot"></div>
                    </div>

                    <div class="letter-options" id="wordLetterOptions"></div>

                    <button class="btn btn-success" onclick="checkWord()">Verificar Palavra</button>
                </div>
            </div>
        </div>

        <!-- Tela de Rimas -->
        <div id="rhymesScreen" class="screen">
            <div class="activity-container">
                <div class="activity-header">
                    <div class="activity-title">üéµ Encontre a Rima</div>
                    <div class="score-display">
                        <span>‚≠ê</span>
                        <span class="score-value" id="rhymeScore">0</span>
                    </div>
                </div>

                <div class="rhyme-container">
                    <div class="rhyme-word" id="rhymeWord">GATO</div>
                    
                    <h3 style="color: var(--purple-dark); margin-bottom: 2rem;">O que rima?</h3>
                    
                    <div class="rhyme-options" id="rhymeOptions"></div>
                </div>
            </div>
        </div>

        <!-- Tela de Bingo -->
        <div id="bingoScreen" class="screen">
            <div class="activity-container">
                <div class="activity-header">
                    <div class="activity-title">üé≤ Bingo das S√≠labas</div>
                    <div class="score-display">
                        <span>‚≠ê</span>
                        <span class="score-value" id="bingoScore">0</span>
                    </div>
                </div>

                <div class="bingo-container">
                    <div class="bingo-caller">
                        <h3>Procure por:</h3>
                        <div class="called-item" id="calledItem">BA</div>
                    </div>

                    <div class="bingo-grid" id="bingoGrid"></div>

                    <div style="text-align: center; margin-top: 2rem;">
                        <button class="btn btn-secondary" onclick="callNextBingo()">Pr√≥xima S√≠laba</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tela de Mem√≥ria -->
        <div id="memoryScreen" class="screen">
            <div class="activity-container">
                <div class="activity-header">
                    <div class="activity-title">üÉè Jogo da Mem√≥ria</div>
                    <div class="score-display">
                        <span>‚≠ê</span>
                        <span class="score-value" id="memoryScore">0</span>
                    </div>
                </div>

                <div class="memory-grid" id="memoryGrid"></div>

                <div style="text-align: center; margin-top: 2rem;">
                    <button class="btn btn-primary" onclick="resetMemoryGame()">Novo Jogo</button>
                </div>
            </div>
        </div>

        <!-- Tela de Hist√≥ria -->
        <div id="storyScreen" class="screen">
            <div class="story-container">
                <div class="story-scene">
                    <div class="story-illustration" id="storyImage">üê•</div>
                    
                    <div class="story-text" id="storyText">
                        O pintinho amarelinho encontrou a letra <span class="story-highlight">A</span>!
                        Ele viu uma <span class="story-highlight">ABELHA</span> voando.
                    </div>

                    <div class="story-options">
                        <button class="story-choice" onclick="nextStoryScene('A')">Letra A</button>
                        <button class="story-choice" onclick="nextStoryScene('E')">Letra E</button>
                        <button class="story-choice" onclick="nextStoryScene('I')">Letra I</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Painel dos Pais -->
        <div id="parentScreen" class="screen">
            <div class="activity-container">
                <div class="activity-header">
                    <div class="activity-title">üìä Progresso da Crian√ßa</div>
                    <button class="btn btn-secondary" onclick="goHome()">Voltar</button>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 2rem 0;">
                    <div style="background: white; padding: 1.5rem; border-radius: 15px; text-align: center;">
                        <h3 style="color: var(--purple-dark);">Tempo Total</h3>
                        <p style="font-size: 36px; font-weight: bold; color: var(--pink);">45 min</p>
                    </div>
                    <div style="background: white; padding: 1.5rem; border-radius: 15px; text-align: center;">
                        <h3 style="color: var(--purple-dark);">Pontos</h3>
                        <p style="font-size: 36px; font-weight: bold; color: var(--green);">1250</p>
                    </div>
                    <div style="background: white; padding: 1.5rem; border-radius: 15px; text-align: center;">
                        <h3 style="color: var(--purple-dark);">Acertos</h3>
                        <p style="font-size: 36px; font-weight: bold; color: var(--orange);">85%</p>
                    </div>
                </div>

                <h3 style="color: var(--purple-dark); margin: 2rem 0 1rem;">Progresso por Atividade:</h3>
                <div id="progressReport"></div>
            </div>
        </div>
    </div>

    <!-- Modal de Avatar -->
    <div class="avatar-modal" id="avatarModal">
        <div class="avatar-selection">
            <h2 style="text-align: center; color: var(--purple-dark); margin-bottom: 1rem;">Escolha seu Avatar!</h2>
            
            <div class="avatar-grid">
                <div class="avatar-option" onclick="selectAvatar('üê•')">üê•</div>
                <div class="avatar-option" onclick="selectAvatar('ü¶Å')">ü¶Å</div>
                <div class="avatar-option" onclick="selectAvatar('üê∞')">üê∞</div>
                <div class="avatar-option" onclick="selectAvatar('üêª')">üêª</div>
                <div class="avatar-option" onclick="selectAvatar('ü¶ä')">ü¶ä</div>
                <div class="avatar-option" onclick="selectAvatar('üê∏')">üê∏</div>
                <div class="avatar-option" onclick="selectAvatar('ü¶Ñ')">ü¶Ñ</div>
                <div class="avatar-option" onclick="selectAvatar('üêô')">üêô</div>
                <div class="avatar-option" onclick="selectAvatar('ü¶ã')">ü¶ã</div>
                <div class="avatar-option" onclick="selectAvatar('üê¢')">üê¢</div>
                <div class="avatar-option" onclick="selectAvatar('ü¶ú')">ü¶ú</div>
                <div class="avatar-option" onclick="selectAvatar('üê†')">üê†</div>
            </div>

            <div style="text-align: center; margin-top: 2rem;">
                <button class="btn btn-primary" onclick="closeAvatarModal()">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Theme Selector -->
    <div class="avatar-modal" id="themeModal">
        <div class="avatar-selection">
            <h2 style="text-align: center; color: var(--purple-dark); margin-bottom: 1rem;">Escolha o Tema!</h2>
            
            <div class="theme-selector">
                <div class="theme-option theme-default" onclick="selectTheme('default')">üé®</div>
                <div class="theme-option theme-forest" onclick="selectTheme('forest')">üå≥</div>
                <div class="theme-option theme-ocean" onclick="selectTheme('ocean')">üåä</div>
                <div class="theme-option theme-space" onclick="selectTheme('space')">üöÄ</div>
            </div>

            <div style="text-align: center; margin-top: 2rem;">
                <button class="btn btn-primary" onclick="closeThemeModal()">Aplicar</button>
            </div>
        </div>
    </div>

    <!-- Celebration Container -->
    <div class="celebration-container" id="celebrationContainer"></div>

    <!-- Audio Toggle -->
    <div class="audio-toggle" id="audioToggle" onclick="toggleAudio()">üîä</div>

    <!-- Audio Elements -->
    <audio id="bgMusic" loop>
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBTGH0fPTgjMGHm7A7+OZURE" type="audio/wav">
    </audio>

    <script>
        // Estado Global
        let currentScreen = 'homeScreen';
        let currentAvatar = 'üê•';
        let currentTheme = 'default';
        let audioEnabled = true;
        let draggedElement = null;
        
        // Pontua√ß√µes
        let scores = {
            vowels: 0,
            syllables: 0,
            words: 0,
            rhymes: 0,
            bingo: 0,
            memory: 0,
            total: 0
        };

        // Dados das Vogais
        const vowelData = {
            A: [
                { emoji: 'üêù', word: 'Abelha' },
                { emoji: '‚úàÔ∏è', word: 'Avi√£o' },
                { emoji: 'üåü', word: 'Astro' },
                { emoji: 'üöó', word: 'Auto' },
                { emoji: 'ü¶Ö', word: '√Åguia' }
            ],
            E: [
                { emoji: 'üêò', word: 'Elefante' },
                { emoji: '‚≠ê', word: 'Estrela' },
                { emoji: 'üè´', word: 'Escola' },
                { emoji: 'ü™ú', word: 'Escada' },
                { emoji: 'üó°Ô∏è', word: 'Espada' }
            ],
            I: [
                { emoji: 'üèùÔ∏è', word: 'Ilha' },
                { emoji: '‚õ™', word: 'Igreja' },
                { emoji: 'üß≤', word: 'Im√£' },
                { emoji: 'ü¶é', word: 'Iguana' },
                { emoji: 'üç¶', word: 'Iogurte' }
            ],
            O: [
                { emoji: 'üêô', word: 'Oito' },
                { emoji: 'üëÅÔ∏è', word: 'Olho' },
                { emoji: 'ü•ö', word: 'Ovo' },
                { emoji: 'üåä', word: 'Onda' },
                { emoji: 'üêª', word: 'On√ßa' }
            ],
            U: [
                { emoji: 'ü¶Ñ', word: 'Unic√≥rnio' },
                { emoji: 'üçá', word: 'Uva' },
                { emoji: 'üêª', word: 'Urso' },
                { emoji: 'üè≠', word: 'Usina' },
                { emoji: '‚òÇÔ∏è', word: 'Umbrela' }
            ]
        };

        // Inicializa√ß√£o
        window.onload = function() {
            loadSettings();
            initDragAndDrop();
            if (audioEnabled) {
                playBackgroundMusic();
            }
        };

        // Navega√ß√£o
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
            currentScreen = screenId;
            playSound('transition');
        }

        function goHome() {
            showScreen('homeScreen');
        }

        function startActivity(activity) {
            switch(activity) {
                case 'vowels':
                    showScreen('vowelsScreen');
                    break;
                case 'syllables':
                    startSyllableGame();
                    break;
                case 'words':
                    startWordGame();
                    break;
                case 'rhymes':
                    startRhymeGame();
                    break;
                case 'bingo':
                    startBingoGame();
                    break;
                case 'memory':
                    startMemoryGame();
                    break;
                case 'story':
                    startStoryMode();
                    break;
                case 'complete':
                    startCompleteSession();
                    break;
            }
        }

        // Vogais
        function selectVowel(vowel) {
            playSound('click');
            speakLetter(vowel);
            
            document.querySelectorAll('.vowel-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            event.currentTarget.classList.add('selected');
            scores.vowels += 5;
            updateScore('vowelScore', scores.vowels);
        }

        function startVowelDragGame() {
            showScreen('vowelDragScreen');
            initVowelDragRound();
        }

        function initVowelDragRound() {
            const vowels = Object.keys(vowelData);
            const currentVowel = vowels[Math.floor(Math.random() * vowels.length)];
            
            // Criar letra arrast√°vel
            const letterContainer = document.getElementById('letterContainer');
            letterContainer.innerHTML = `
                <div class="draggable-letter" draggable="true" data-vowel="${currentVowel}">
                    ${currentVowel}
                </div>
            `;
            
            // Criar alvos
            const targetsContainer = document.getElementById('targetsContainer');
            targetsContainer.innerHTML = '';
            
            // Adicionar alvo correto
            const correctTargets = vowelData[currentVowel];
            const correctTarget = correctTargets[Math.floor(Math.random() * correctTargets.length)];
            
            // Adicionar alvos incorretos
            const allTargets = [];
            allTargets.push({ ...correctTarget, correct: true, vowel: currentVowel });
            
            // Pegar alvos de outras vogais
            vowels.filter(v => v !== currentVowel).forEach(v => {
                const targets = vowelData[v];
                if (targets.length > 0) {
                    const randomTarget = targets[Math.floor(Math.random() * targets.length)];
                    allTargets.push({ ...randomTarget, correct: false, vowel: v });
                }
            });
            
            // Embaralhar e pegar 3
            const shuffled = allTargets.sort(() => Math.random() - 0.5).slice(0, 3);
            
            shuffled.forEach(target => {
                const div = document.createElement('div');
                div.className = 'drop-target';
                div.dataset.correct = target.correct;
                div.dataset.vowel = target.vowel;
                div.innerHTML = `
                    <div class="target-emoji">${target.emoji}</div>
                    <div class="target-word">${target.word}</div>
                `;
                targetsContainer.appendChild(div);
            });
            
            // Reinicializar drag and drop
            initDragAndDrop();
        }

        // Drag and Drop
        function initDragAndDrop() {
            // Elementos arrast√°veis
            document.querySelectorAll('.draggable-letter').forEach(elem => {
                elem.addEventListener('dragstart', handleDragStart);
                elem.addEventListener('dragend', handleDragEnd);
                
                // Touch events
                elem.addEventListener('touchstart', handleTouchStart, {passive: false});
                elem.addEventListener('touchmove', handleTouchMove, {passive: false});
                elem.addEventListener('touchend', handleTouchEnd);
            });
            
            // Alvos
            document.querySelectorAll('.drop-target').forEach(target => {
                target.addEventListener('dragover', handleDragOver);
                target.addEventListener('drop', handleDrop);
                target.addEventListener('dragleave', handleDragLeave);
                target.addEventListener('dragenter', handleDragEnter);
            });
        }

        function handleDragStart(e) {
            draggedElement = e.target;
            e.target.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
            return false;
        }

        function handleDragEnter(e) {
            const target = e.target.closest('.drop-target');
            if (target) target.classList.add('drag-over');
        }

        function handleDragLeave(e) {
            const target = e.target.closest('.drop-target');
            if (target) target.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.stopPropagation();
            
            const target = e.target.closest('.drop-target');
            if (target) {
                target.classList.remove('drag-over');
                const isCorrect = target.dataset.correct === 'true';
                
                if (isCorrect) {
                    target.classList.add('correct');
                    scores.vowels += 10;
                    scores.total += 10;
                    updateScore('dragScore', scores.vowels);
                    updateProgressBar();
                    showCelebration();
                    playSound('success');
                    
                    setTimeout(() => {
                        initVowelDragRound();
                    }, 1500);
                } else {
                    target.classList.add('incorrect');
                    playSound('error');
                    setTimeout(() => {
                        target.classList.remove('incorrect');
                    }, 500);
                }
            }
            
            return false;
        }

        // Touch handlers
        let touchItem = null;
        
        function handleTouchStart(e) {
            touchItem = e.target;
            const touch = e.touches[0];
            touchItem.style.position = 'fixed';
            touchItem.style.zIndex = '10000';
            touchItem.classList.add('dragging');
        }

        function handleTouchMove(e) {
            if (!touchItem) return;
            e.preventDefault();
            const touch = e.touches[0];
            touchItem.style.left = touch.pageX - 60 + 'px';
            touchItem.style.top = touch.pageY - 60 + 'px';
        }

        function handleTouchEnd(e) {
            if (!touchItem) return;
            
            const touch = e.changedTouches[0];
            const elementBelow = document.elementFromPoint(touch.clientX, touch.clientY);
            const dropTarget = elementBelow?.closest('.drop-target');
            
            if (dropTarget) {
                const evt = new Event('drop', { bubbles: true });
                dropTarget.dispatchEvent(evt);
            }
            
            touchItem.style.position = '';
            touchItem.style.zIndex = '';
            touchItem.classList.remove('dragging');
            touchItem = null;
        }

        // S√≠labas
        function startSyllableGame() {
            showScreen('syllablesScreen');
            loadSyllableRound();
        }

        function loadSyllableRound() {
            const syllables = ['BA', 'BE', 'BI', 'BO', 'BU', 'CA', 'CE', 'CI', 'CO', 'CU', 
                             'DA', 'DE', 'DI', 'DO', 'DU', 'FA', 'FE', 'FI', 'FO', 'FU'];
            const target = syllables[Math.floor(Math.random() * syllables.length)];
            
            document.getElementById('targetSyllable').textContent = target;
            document.getElementById('syllableSlots').innerHTML = `
                <div class="syllable-slot" id="slot1"></div>
                <div class="syllable-slot" id="slot2"></div>
            `;
            
            const letters = [...target, ...generateRandomLetters(4)].sort(() => Math.random() - 0.5);
            const optionsContainer = document.getElementById('letterOptions');
            optionsContainer.innerHTML = '';
            
            letters.forEach(letter => {
                const div = document.createElement('div');
                div.className = 'letter-option';
                div.textContent = letter;
                div.onclick = function() {
                    selectLetter(this, letter);
                };
                optionsContainer.appendChild(div);
            });
        }

        function selectLetter(element, letter) {
            const slot1 = document.getElementById('slot1');
            const slot2 = document.getElementById('slot2');
            
            if (!slot1.textContent) {
                slot1.textContent = letter;
                slot1.classList.add('filled');
            } else if (!slot2.textContent) {
                slot2.textContent = letter;
                slot2.classList.add('filled');
            }
            
            element.classList.add('used');
            playSound('click');
        }

        function checkSyllable() {
            const slot1 = document.getElementById('slot1').textContent;
            const slot2 = document.getElementById('slot2').textContent;
            const target = document.getElementById('targetSyllable').textContent;
            
            if (slot1 + slot2 === target) {
                scores.syllables += 15;
                scores.total += 15;
                updateScore('syllableScore', scores.syllables);
                showCelebration();
                playSound('success');
                setTimeout(loadSyllableRound, 1500);
            } else {
                playSound('error');
                document.querySelectorAll('.syllable-slot').forEach(slot => {
                    slot.textContent = '';
                    slot.classList.remove('filled');
                });
                document.querySelectorAll('.letter-option').forEach(opt => {
                    opt.classList.remove('used');
                });
            }
        }

        // Palavras
        function startWordGame() {
            showScreen('wordsScreen');
            loadWordRound();
        }

        function loadWordRound() {
            const words = [
                { word: 'GATO', emoji: 'üê±' },
                { word: 'CASA', emoji: 'üè†' },
                { word: 'BOLA', emoji: '‚öΩ' },
                { word: 'PATO', emoji: 'ü¶Ü' },
                { word: 'MESA', emoji: 'ü™ë' }
            ];
            
            const target = words[Math.floor(Math.random() * words.length)];
            document.getElementById('targetWord').textContent = target.word;
            document.getElementById('wordImage').textContent = target.emoji;
            
            const slotsContainer = document.getElementById('wordSlots');
            slotsContainer.innerHTML = '';
            for (let i = 0; i < target.word.length; i++) {
                slotsContainer.innerHTML += '<div class="syllable-slot"></div>';
            }
            
            const letters = [...target.word, ...generateRandomLetters(4)].sort(() => Math.random() - 0.5);
            const optionsContainer = document.getElementById('wordLetterOptions');
            optionsContainer.innerHTML = '';
            
            letters.forEach(letter => {
                const div = document.createElement('div');
                div.className = 'letter-option';
                div.textContent = letter;
                div.onclick = function() {
                    selectWordLetter(this, letter);
                };
                optionsContainer.appendChild(div);
            });
        }

        function selectWordLetter(element, letter) {
            const slots = document.querySelectorAll('#wordSlots .syllable-slot');
            for (let slot of slots) {
                if (!slot.textContent) {
                    slot.textContent = letter;
                    slot.classList.add('filled');
                    element.classList.add('used');
                    playSound('click');
                    break;
                }
            }
        }

        function checkWord() {
            const slots = document.querySelectorAll('#wordSlots .syllable-slot');
            const formed = Array.from(slots).map(s => s.textContent).join('');
            const target = document.getElementById('targetWord').textContent;
            
            if (formed === target) {
                scores.words += 20;
                scores.total += 20;
                updateScore('wordScore', scores.words);
                showCelebration();
                playSound('success');
                setTimeout(loadWordRound, 1500);
            } else {
                playSound('error');
                slots.forEach(slot => {
                    slot.textContent = '';
                    slot.classList.remove('filled');
                });
                document.querySelectorAll('.letter-option').forEach(opt => {
                    opt.classList.remove('used');
                });
            }
        }

        // Rimas
        function startRhymeGame() {
            showScreen('rhymesScreen');
            loadRhymeRound();
        }

        function loadRhymeRound() {
            const rhymes = [
                { word: 'GATO', rhymes: ['PATO', 'RATO'], wrong: ['CASA', 'BOLA'] },
                { word: 'BOLA', rhymes: ['COLA', 'MOLA'], wrong: ['PATO', 'MESA'] },
                { word: 'P√ÉO', rhymes: ['C√ÉO', 'M√ÉO'], wrong: ['SOL', 'LUA'] }
            ];
            
            const target = rhymes[Math.floor(Math.random() * rhymes.length)];
            document.getElementById('rhymeWord').textContent = target.word;
            
            const options = [...target.rhymes.slice(0, 1), ...target.wrong.slice(0, 2)].sort(() => Math.random() - 0.5);
            const container = document.getElementById('rhymeOptions');
            container.innerHTML = '';
            
            options.forEach(option => {
                const div = document.createElement('div');
                div.className = 'rhyme-option';
                div.textContent = option;
                div.onclick = function() {
                    const isCorrect = target.rhymes.includes(option);
                    if (isCorrect) {
                        this.classList.add('correct');
                        scores.rhymes += 15;
                        scores.total += 15;
                        updateScore('rhymeScore', scores.rhymes);
                        showCelebration();
                        playSound('success');
                        setTimeout(loadRhymeRound, 1500);
                    } else {
                        this.classList.add('incorrect');
                        playSound('error');
                        setTimeout(() => this.classList.remove('incorrect'), 500);
                    }
                };
                container.appendChild(div);
            });
        }

        // Bingo
        function startBingoGame() {
            showScreen('bingoScreen');
            initBingo();
        }

        function initBingo() {
            const syllables = ['BA', 'BE', 'BI', 'BO', 'BU', 'CA', 'CE', 'CI', 'CO'];
            const grid = document.getElementById('bingoGrid');
            grid.innerHTML = '';
            
            syllables.forEach(syllable => {
                const cell = document.createElement('div');
                cell.className = 'bingo-cell';
                cell.textContent = syllable;
                cell.dataset.syllable = syllable;
                cell.onclick = function() {
                    const called = document.getElementById('calledItem').textContent;
                    if (this.dataset.syllable === called && !this.classList.contains('marked')) {
                        this.classList.add('marked');
                        scores.bingo += 10;
                        scores.total += 10;
                        updateScore('bingoScore', scores.bingo);
                        playSound('success');
                        showCelebration();
                        setTimeout(callNextBingo, 1500);
                    }
                };
                grid.appendChild(cell);
            });
            
            callNextBingo();
        }

        function callNextBingo() {
            const cells = document.querySelectorAll('.bingo-cell:not(.marked)');
            if (cells.length === 0) {
                showCelebration();
                alert('üéâ Parab√©ns! Voc√™ completou o Bingo!');
                initBingo();
                return;
            }
            
            const randomCell = cells[Math.floor(Math.random() * cells.length)];
            document.getElementById('calledItem').textContent = randomCell.dataset.syllable;
            speakText('Procure por ' + randomCell.dataset.syllable);
        }

        // Memory Game
        function startMemoryGame() {
            showScreen('memoryScreen');
            resetMemoryGame();
        }

        let memoryCards = [];
        let flippedCards = [];
        let matchedPairs = 0;

        function resetMemoryGame() {
            const pairs = ['A', 'E', 'I', 'O', 'U', 'B', 'C', 'D'];
            const cards = [...pairs, ...pairs].sort(() => Math.random() - 0.5);
            
            const grid = document.getElementById('memoryGrid');
            grid.innerHTML = '';
            flippedCards = [];
            matchedPairs = 0;
            
            cards.forEach((card, index) => {
                const div = document.createElement('div');
                div.className = 'memory-card';
                div.dataset.value = card;
                div.dataset.index = index;
                div.innerHTML = `
                    <div class="card-back">?</div>
                    <div class="card-front">${card}</div>
                `;
                div.onclick = function() {
                    flipCard(this);
                };
                grid.appendChild(div);
            });
        }

        function flipCard(card) {
            if (card.classList.contains('flipped') || card.classList.contains('matched') || flippedCards.length >= 2) {
                return;
            }
            
            card.classList.add('flipped');
            flippedCards.push(card);
            playSound('click');
            
            if (flippedCards.length === 2) {
                setTimeout(checkMemoryMatch, 600);
            }
        }

        function checkMemoryMatch() {
            const [card1, card2] = flippedCards;
            
            if (card1.dataset.value === card2.dataset.value) {
                card1.classList.add('matched');
                card2.classList.add('matched');
                matchedPairs++;
                scores.memory += 20;
                scores.total += 20;
                updateScore('memoryScore', scores.memory);
                playSound('success');
                
                if (matchedPairs === 8) {
                    showCelebration();
                    setTimeout(() => {
                        alert('üéâ Parab√©ns! Voc√™ encontrou todos os pares!');
                        resetMemoryGame();
                    }, 1500);
                }
            } else {
                card1.classList.remove('flipped');
                card2.classList.remove('flipped');
                playSound('error');
            }
            
            flippedCards = [];
        }

        // Story Mode
        let storyScene = 0;
        const storyScenes = [
            {
                image: 'üê•',
                text: 'O pintinho amarelinho encontrou a letra <span class="story-highlight">A</span>! Ele viu uma <span class="story-highlight">ABELHA</span> voando.',
                options: ['A', 'E', 'I']
            },
            {
                image: 'üêò',
                text: 'Depois ele encontrou um <span class="story-highlight">ELEFANTE</span> com a letra <span class="story-highlight">E</span>!',
                options: ['O', 'U', 'E']
            },
            {
                image: 'üèùÔ∏è',
                text: 'Em uma <span class="story-highlight">ILHA</span>, ele descobriu a letra <span class="story-highlight">I</span>!',
                options: ['I', 'A', 'O']
            }
        ];

        function startStoryMode() {
            showScreen('storyScreen');
            storyScene = 0;
            loadStoryScene();
        }

        function loadStoryScene() {
            if (storyScene >= storyScenes.length) {
                storyScene = 0;
            }
            
            const scene = storyScenes[storyScene];
            document.getElementById('storyImage').textContent = scene.image;
            document.getElementById('storyText').innerHTML = scene.text;
            
            const container = document.querySelector('.story-options');
            container.innerHTML = '';
            
            scene.options.forEach(option => {
                const btn = document.createElement('button');
                btn.className = 'story-choice';
                btn.textContent = `Letra ${option}`;
                btn.onclick = function() {
                    nextStoryScene(option);
                };
                container.appendChild(btn);
            });
            
            speakText(scene.text.replace(/<[^>]*>/g, ''));
        }

        function nextStoryScene(choice) {
            playSound('click');
            storyScene++;
            
            if (storyScene >= storyScenes.length) {
                showCelebration();
                alert('üéâ Fim da hist√≥ria! Voc√™ aprendeu todas as vogais!');
                goHome();
            } else {
                loadStoryScene();
            }
        }

        // Complete Session
        function startCompleteSession() {
            const activities = ['vowels', 'syllables', 'words', 'rhymes', 'bingo'];
            let currentActivity = 0;
            
            function nextActivity() {
                if (currentActivity >= activities.length) {
                    showCelebration();
                    alert('üéâ Sess√£o completa! Voc√™ √© incr√≠vel!');
                    showParentPanel();
                } else {
                    startActivity(activities[currentActivity]);
                    currentActivity++;
                    setTimeout(nextActivity, 30000); // 30 segundos por atividade
                }
            }
            
            nextActivity();
        }

        // Parent Panel
        function showParentPanel() {
            showScreen('parentScreen');
            generateProgressReport();
        }

        function generateProgressReport() {
            const report = document.getElementById('progressReport');
            report.innerHTML = '';
            
            const activities = [
                { name: 'Vogais', score: scores.vowels, max: 100 },
                { name: 'S√≠labas', score: scores.syllables, max: 100 },
                { name: 'Palavras', score: scores.words, max: 100 },
                { name: 'Rimas', score: scores.rhymes, max: 100 },
                { name: 'Bingo', score: scores.bingo, max: 100 },
                { name: 'Mem√≥ria', score: scores.memory, max: 100 }
            ];
            
            activities.forEach(activity => {
                const percentage = Math.min((activity.score / activity.max) * 100, 100);
                report.innerHTML += `
                    <div style="margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                            <span style="font-weight: bold;">${activity.name}</span>
                            <span>${Math.round(percentage)}%</span>
                        </div>
                        <div style="background: #E5E5E5; border-radius: 10px; height: 20px; overflow: hidden;">
                            <div style="width: ${percentage}%; height: 100%; background: linear-gradient(90deg, var(--purple-light), var(--pink)); transition: width 0.5s;"></div>
                        </div>
                    </div>
                `;
            });
        }

        // Avatar System
        function openAvatarModal() {
            document.getElementById('avatarModal').classList.add('active');
        }

        function closeAvatarModal() {
            document.getElementById('avatarModal').classList.remove('active');
        }

        function selectAvatar(avatar) {
            currentAvatar = avatar;
            document.getElementById('currentAvatar').textContent = avatar;
            localStorage.setItem('selectedAvatar', avatar);
            playSound('click');
        }

        // Theme System
        function openThemeSelector() {
            document.getElementById('themeModal').classList.add('active');
        }

        function closeThemeModal() {
            document.getElementById('themeModal').classList.remove('active');
        }

        function selectTheme(theme) {
            currentTheme = theme;
            applyTheme(theme);
            localStorage.setItem('selectedTheme', theme);
            playSound('click');
        }

        function applyTheme(theme) {
            const body = document.body;
            switch(theme) {
                case 'forest':
                    body.style.background = 'linear-gradient(180deg, #228B22, #90EE90)';
                    break;
                case 'ocean':
                    body.style.background = 'linear-gradient(180deg, #0077BE, #87CEEB)';
                    break;
                case 'space':
                    body.style.background = 'linear-gradient(180deg, #191970, #9370DB)';
                    break;
                default:
                    body.style.background = 'linear-gradient(180deg, var(--purple-main), var(--purple-dark))';
            }
        }

        // Audio System
        function toggleAudio() {
            audioEnabled = !audioEnabled;
            const toggle = document.getElementById('audioToggle');
            toggle.textContent = audioEnabled ? 'üîä' : 'üîá';
            toggle.classList.toggle('muted');
            
            if (audioEnabled) {
                playBackgroundMusic();
            } else {
                stopBackgroundMusic();
            }
        }

        function playBackgroundMusic() {
            // Simplified background music
            if (audioEnabled) {
                const bgMusic = document.getElementById('bgMusic');
                bgMusic.volume = 0.3;
                bgMusic.play().catch(e => console.log('Music autoplay blocked'));
            }
        }

        function stopBackgroundMusic() {
            document.getElementById('bgMusic').pause();
        }

        function playSound(type) {
            if (!audioEnabled) return;
            
            const context = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = context.createOscillator();
            const gainNode = context.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(context.destination);
            
            switch(type) {
                case 'success':
                    oscillator.frequency.value = 523.25;
                    gainNode.gain.value = 0.3;
                    break;
                case 'error':
                    oscillator.frequency.value = 200;
                    gainNode.gain.value = 0.2;
                    break;
                case 'click':
                    oscillator.frequency.value = 800;
                    gainNode.gain.value = 0.1;
                    break;
                case 'transition':
                    oscillator.frequency.value = 440;
                    gainNode.gain.value = 0.2;
                    break;
            }
            
            oscillator.start();
            oscillator.stop(context.currentTime + 0.1);
        }

        function speakLetter(letter) {
            if (!audioEnabled) return;
            speakText(letter);
        }

        function speakText(text) {
            if (!audioEnabled || !('speechSynthesis' in window)) return;
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'pt-BR';
            utterance.rate = 0.9;
            utterance.pitch = 1.2;
            speechSynthesis.speak(utterance);
        }

        // Celebrations
        function showCelebration() {
            const container = document.getElementById('celebrationContainer');
            container.innerHTML = '';
            
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                    container.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 50);
            }
        }

        // Utilities
        function updateScore(elementId, score) {
            document.getElementById(elementId).textContent = score;
        }

        function updateProgressBar() {
            const progress = Math.min((scores.total / 500) * 100, 100);
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function generateRandomLetters(count) {
            const letters = 'BCDFGHJKLMNPQRSTVWXYZ';
            const result = [];
            for (let i = 0; i < count; i++) {
                result.push(letters[Math.floor(Math.random() * letters.length)]);
            }
            return result;
        }

        function loadSettings() {
            const savedAvatar = localStorage.getItem('selectedAvatar');
            if (savedAvatar) {
                currentAvatar = savedAvatar;
                document.getElementById('currentAvatar').textContent = savedAvatar;
            }
            
            const savedTheme = localStorage.getItem('selectedTheme');
            if (savedTheme) {
                currentTheme = savedTheme;
                applyTheme(savedTheme);
            }
        }

        // Prevent accidental navigation
        window.addEventListener('beforeunload', function(e) {
            if (currentScreen !== 'homeScreen') {
                e.preventDefault();
                e.returnValue = '';
            }
        });
    </script>
</body>
</html>